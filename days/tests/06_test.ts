import { assertEquals } from "@std/assert";
import { parseInput, getPath, countUniquePathPositions, findLoops } from "../06.ts";

Deno.test(function day06Test() {
    const input = `
        ....#.....
        .........#
        ..........
        ..#.......
        .......#..
        ..........
        .#..^.....
        ........#.
        #.........
        ......#...
    `;

    const map = parseInput(input);

    assertEquals(map, [
        [".", ".", ".", ".", "#", ".", ".", ".", ".", "."], 
        [".", ".", ".", ".", ".", ".", ".", ".", ".", "#"], 
        [".", ".", ".", ".", ".", ".", ".", ".", ".", "."], 
        [".", ".", "#", ".", ".", ".", ".", ".", ".", "."], 
        [".", ".", ".", ".", ".", ".", ".", "#", ".", "."], 
        [".", ".", ".", ".", ".", ".", ".", ".", ".", "."], 
        [".", "#", ".", ".", "^", ".", ".", ".", ".", "."], 
        [".", ".", ".", ".", ".", ".", ".", ".", "#", "."], 
        ["#", ".", ".", ".", ".", ".", ".", ".", ".", "."], 
        [".", ".", ".", ".", ".", ".", "#", ".", ".", "."],
    ]);

    const path = getPath(map)[0];

    assertEquals(countUniquePathPositions(path), 41);

    assertEquals(findLoops(map), 6);
});
