import { assertEquals } from "@std/assert";
import { Lab, GuardPath, findLoops } from "../06.ts";

Deno.test(function day06Test() {
    const input = `
        ....#.....
        .........#
        ..........
        ..#.......
        .......#..
        ..........
        .#..^.....
        ........#.
        #.........
        ......#...
    `;

    const lab = new Lab(input);

    assertEquals(lab.map, [
        [".", ".", ".", ".", "#", ".", ".", ".", ".", "."], 
        [".", ".", ".", ".", ".", ".", ".", ".", ".", "#"], 
        [".", ".", ".", ".", ".", ".", ".", ".", ".", "."], 
        [".", ".", "#", ".", ".", ".", ".", ".", ".", "."], 
        [".", ".", ".", ".", ".", ".", ".", "#", ".", "."], 
        [".", ".", ".", ".", ".", ".", ".", ".", ".", "."], 
        [".", "#", ".", ".", "^", ".", ".", ".", ".", "."], 
        [".", ".", ".", ".", ".", ".", ".", ".", "#", "."], 
        ["#", ".", ".", ".", ".", ".", ".", ".", ".", "."], 
        [".", ".", ".", ".", ".", ".", "#", ".", ".", "."],
    ]);

    const path = new GuardPath(lab);

    assertEquals(path.uniquePositions().length, 41);

    assertEquals(findLoops(lab), 6);
});
